version: 1

common:
  daprdLogDestination: console
  appLogDestination: console
  appChannelAddress: 127.0.0.1
  appProtocol: grpc
  env:
    ADDR: 127.0.0.1
    MODE: development
    LOG_LEVEL: debug
    POSTGRES_HOST: localhost
    POSTGRES_PORT: 5432
    POSTGRES_USER: postgres
    POSTGRES_PASSWORD: postgres
    INSECURE_FAKE_TOKEN_ENABLE: true
    REDIS_ADDR: localhost:6379
    INSECURE_REDIS_NO_TLS: true
    ORGANIZATION_ID: 3b25c6f5-4705-4074-9fc6-a50c28eba405

apps:
  - appID: task-svc
    appDirPath: services/task-svc
    appPort: 3001
    env:
      POSTGRES_DB: task-svc
    command: ["air"]

  - appID: user-svc
    appDirPath: services/user-svc
    appPort: 3002
    env:
      POSTGRES_DB: user-svc
    command: ["air"]

  - appID: ory-svc
    appDirPath: services/ory-svc
    appPort: 3003
    appProtocol: http
    env:
      ORY_APIKEY: 2341
    command: ["air"]

  - appID: apisix
    appPort: 9080
    appDirPath: .
    daprInternalGRPCPort: 35001
    daprHTTPPort: 3500
    command: ["bash", "-c", "docker run --name helpwave-services-apisix -e NO_DAPR=true --network host -v $(pwd)/apisix/apisix_config.dev.yaml:/usr/local/apisix/conf/config.yaml --rm $(docker build -q -f Dockerfile.apisix -t helpwave-services-apisix .)"]

